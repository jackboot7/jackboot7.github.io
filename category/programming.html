
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.jackboot7.com/theme/stylesheet/style.min.css">


  <link rel="stylesheet" type="text/css" href="https://www.jackboot7.com/theme/pygments/solarized-light.min.css">
  <link rel="stylesheet" type="text/css" href="https://www.jackboot7.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://www.jackboot7.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://www.jackboot7.com/theme/font-awesome/css/solid.css">

    <link href="https://www.jackboot7.com/extra/custom.css" rel="stylesheet">

    <link href="https://www.jackboot7.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Luis Alberto Santana Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43616963-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#FFF">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#FFF">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#FFF">

    <meta name="author" content="Luis Alberto Santana" />
    <meta name="description" content="" />
<meta property="og:site_name" content="Luis Alberto Santana"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Luis Alberto Santana"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://www.jackboot7.com"/>
<meta property="og:image" content="https://2.gravatar.com/avatar/e426d5ca1f331cb8418614b7439a8dcd?v=2&s=150">

  <title>Luis Alberto Santana &ndash;     Category programming
</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://www.jackboot7.com">
        <img src="https://2.gravatar.com/avatar/e426d5ca1f331cb8418614b7439a8dcd?v=2&s=150" alt="" title="">
      </a>
      <h1><a href="https://www.jackboot7.com"></a></h1>

<p>@jackboot7</p>      <nav>
        <ul class="list">

            <li><a target="_blank" href="https://www.jackboot7.com/pages/about-me.html#about-me">About me</a></li>

            <li><a target="_blank" href="https://www.jackboot7.com/engineering-management/" >Engineering Management Resources</a></li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/jackboot7" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/jackboot7" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/lsantanaf" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-stack-overflow" href="https://stackoverflow.com/users/1170195/luis-alberto-santana" target="_blank">
            <i class="fab fa-stack-overflow">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://www.jackboot7.com">    Home
</a>


      <a href="https://www.jackboot7.com/feeds/all.atom.xml">    Atom
</a>

    </nav>



<article>
  <header>
    <h2><a href="https://www.jackboot7.com/python-tips.html#python-tips">Python Tips</a></h2>
    <p>
          Posted on Wednesday, Jul 01, 2020 in <a href="https://www.jackboot7.com/category/programming.html">programming</a>


          &#8226;     Tagged with

              <a href="https://www.jackboot7.com/tag/python.html">python</a>,              <a href="https://www.jackboot7.com/tag/tips.html">tips</a>,              <a href="https://www.jackboot7.com/tag/lists.html">lists</a>,              <a href="https://www.jackboot7.com/tag/functools.html">functools</a>,              <a href="https://www.jackboot7.com/tag/itertools.html">itertools</a>,              <a href="https://www.jackboot7.com/tag/timezone.html">timezone</a>
    </p>
  </header>
  <div>
      <div class="section" id="a-collection-of-small-python-scripts-and-tips">
<h2>A collection of small Python scripts and tips.</h2>
<p>This post is based on a <a class="reference external" href="https://twitter.com/jackboot7/status/1243321600507654144">Twitter thread</a> I started in April 2020 and works as a centralized way
to read all the tips in an easier format than Twitter's 280 characters.</p>
<p>Both will be updated frequently.</p>
<div class="section" id="list-flatten-without-explicit-loops">
<h3>List Flatten without explicit loops</h3>
<ul class="simple">
<li>Using Itertools' chain</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">import</span> <span class="pgcssnn">itertools</span>

<span class="pgcssn">test</span> <span class="pgcsso">=</span> <span class="pgcssp">[[</span><span class="pgcsso">-</span><span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcsso">-</span><span class="pgcssmi">2</span><span class="pgcssp">],</span> <span class="pgcssp">[</span><span class="pgcssmi">30</span><span class="pgcssp">,</span> <span class="pgcssmi">40</span><span class="pgcssp">],</span> <span class="pgcssp">[</span><span class="pgcssmi">25</span><span class="pgcssp">,</span> <span class="pgcssmi">35</span><span class="pgcssp">]]</span>
<span class="pgcssnb">list</span><span class="pgcssp">(</span><span class="pgcssn">itertools</span><span class="pgcsso">.</span><span class="pgcssn">chain</span><span class="pgcsso">.</span><span class="pgcssn">from_iterable</span><span class="pgcssp">(</span><span class="pgcssn">test</span><span class="pgcssp">))</span>

<span class="pgcsso">&gt;&gt;</span>  <span class="pgcssp">[</span><span class="pgcsso">-</span><span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcsso">-</span><span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcssmi">30</span><span class="pgcssp">,</span> <span class="pgcssmi">40</span><span class="pgcssp">,</span> <span class="pgcssmi">25</span><span class="pgcssp">,</span> <span class="pgcssmi">35</span><span class="pgcssp">]</span>
</pre></div>
</td></tr></table><ul class="simple">
<li>Using <strong>map</strong> and strings (Suggested by <a class="reference external" href="https://twitter.com/Romestantc/status/1243655980203659265">&#64;Romestantc</a> )</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssn">test</span> <span class="pgcsso">=</span>  <span class="pgcssp">[[</span><span class="pgcsso">-</span><span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcsso">-</span><span class="pgcssmi">2</span><span class="pgcssp">],</span> <span class="pgcssp">[</span><span class="pgcssmi">30</span><span class="pgcssp">,</span> <span class="pgcssmi">40</span><span class="pgcssp">],</span> <span class="pgcssp">[</span><span class="pgcssmi">25</span><span class="pgcssp">,</span> <span class="pgcssmi">35</span><span class="pgcssp">]]</span>
<span class="pgcssnb">map</span><span class="pgcssp">(</span><span class="pgcssnb">int</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;&#39;</span><span class="pgcsso">.</span><span class="pgcssn">join</span><span class="pgcssp">(</span><span class="pgcssn">c</span> <span class="pgcssk">for</span> <span class="pgcssn">c</span> <span class="pgcssow">in</span> <span class="pgcssn">test</span><span class="pgcsso">.</span><span class="pgcssfm">__str__</span><span class="pgcssp">()</span> <span class="pgcssk">if</span> <span class="pgcssn">c</span> <span class="pgcssow">not</span> <span class="pgcssow">in</span> <span class="pgcsss1">&#39;[]&#39;</span><span class="pgcssp">)</span><span class="pgcsso">.</span><span class="pgcssn">split</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;,&#39;</span><span class="pgcssp">)</span> <span class="pgcssp">)</span>

<span class="pgcsso">&gt;&gt;</span> <span class="pgcssp">[</span><span class="pgcsso">-</span><span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcsso">-</span><span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcssmi">30</span><span class="pgcssp">,</span> <span class="pgcssmi">40</span><span class="pgcssp">,</span> <span class="pgcssmi">25</span><span class="pgcssp">,</span> <span class="pgcssmi">35</span><span class="pgcssp">]</span>
</pre></div>
</td></tr></table><p>Not pretty in my opinion ;)</p>
</div>
<div class="section" id="count-individual-items-of-any-iterable">
<h3>Count  individual items of any iterable</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">from</span> <span class="pgcssnn">collections</span> <span class="pgcsskn">import</span> <span class="pgcssn">Counter</span>
<span class="pgcssn">count</span> <span class="pgcsso">=</span> <span class="pgcssn">Counter</span><span class="pgcssp">([</span><span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;b&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;c&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;b&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;d&#39;</span><span class="pgcssp">])</span>

<span class="pgcssnb">print</span><span class="pgcssp">(</span><span class="pgcssn">count</span><span class="pgcssp">)</span>
<span class="pgcsso">&gt;&gt;</span> <span class="pgcssn">Counter</span><span class="pgcssp">({</span><span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">:</span> <span class="pgcssmi">3</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;b&#39;</span><span class="pgcssp">:</span> <span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;c&#39;</span><span class="pgcssp">:</span> <span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;d&#39;</span><span class="pgcssp">:</span> <span class="pgcssmi">1</span><span class="pgcssp">})</span>

<span class="pgcssn">count</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">]</span>
<span class="pgcsso">&gt;&gt;</span> <span class="pgcssmi">3</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="repeat-a-series-of-values-from-any-iterable">
<h3>Repeat a series of values from any iterable</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">import</span> <span class="pgcssnn">itertools</span> <span class="pgcssk">as</span> <span class="pgcssnn">it</span>

<span class="pgcssn">data</span> <span class="pgcsso">=</span> <span class="pgcssn">it</span><span class="pgcsso">.</span><span class="pgcssn">cycle</span><span class="pgcssp">([</span><span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcssmi">2</span><span class="pgcssp">])</span>

<span class="pgcssk">for</span> <span class="pgcssn">i</span> <span class="pgcssow">in</span> <span class="pgcssnb">range</span><span class="pgcssp">(</span><span class="pgcssmi">10</span><span class="pgcssp">):</span>
    <span class="pgcssnb">print</span><span class="pgcssp">(</span><span class="pgcssnb">next</span><span class="pgcssp">(</span><span class="pgcssn">data</span><span class="pgcssp">))</span>

<span class="pgcsso">&gt;&gt;</span> <span class="pgcssmi">1</span>
<span class="pgcssmi">2</span>
<span class="pgcssmi">1</span>
<span class="pgcssmi">2</span>
<span class="pgcssmi">1</span>
<span class="pgcssmi">2</span>
<span class="pgcssmi">1</span>
<span class="pgcssmi">2</span>
<span class="pgcssmi">1</span>
<span class="pgcssmi">2</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="name-slices-to-reuse-them">
<h3>Name slices to reuse them</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssc1"># slice(start, end, step)</span>

<span class="pgcssn">STEPTWO</span> <span class="pgcsso">=</span> <span class="pgcssnb">slice</span><span class="pgcssp">(</span><span class="pgcsskc">None</span><span class="pgcssp">,</span> <span class="pgcsskc">None</span><span class="pgcssp">,</span> <span class="pgcssmi">2</span><span class="pgcssp">)</span>
<span class="pgcssn">integer_list</span> <span class="pgcsso">=</span> <span class="pgcssp">[</span><span class="pgcssmi">0</span><span class="pgcssp">,</span> <span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcssmi">3</span><span class="pgcssp">,</span> <span class="pgcssmi">4</span><span class="pgcssp">,</span> <span class="pgcssmi">5</span><span class="pgcssp">,</span> <span class="pgcssmi">6</span><span class="pgcssp">,</span> <span class="pgcssmi">7</span><span class="pgcssp">,</span> <span class="pgcssmi">8</span><span class="pgcssp">,</span> <span class="pgcssmi">9</span><span class="pgcssp">]</span>

<span class="pgcssn">integer_list</span><span class="pgcssp">[</span><span class="pgcssn">STEPTWO</span><span class="pgcssp">]</span>

<span class="pgcsso">&gt;&gt;</span> <span class="pgcssp">[</span><span class="pgcssmi">0</span><span class="pgcssp">,</span> <span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcssmi">4</span><span class="pgcssp">,</span> <span class="pgcssmi">6</span><span class="pgcssp">,</span> <span class="pgcssmi">8</span><span class="pgcssp">]</span>
</pre></div>
</td></tr></table><p>This is the same as:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssn">integer_list</span><span class="pgcssp">[::</span><span class="pgcssmi">2</span><span class="pgcssp">]</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="reverse-any-indexable-collection-that-supports-slices">
<h3>Reverse any &quot;indexable&quot; collection that supports slices</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssc1"># slice(None, None, -1) or [::-1]</span>

<span class="pgcssn">integer_list</span> <span class="pgcsso">=</span> <span class="pgcssp">[</span><span class="pgcssmi">0</span><span class="pgcssp">,</span> <span class="pgcssmi">1</span><span class="pgcssp">,</span> <span class="pgcssmi">2</span><span class="pgcssp">,</span> <span class="pgcssmi">3</span><span class="pgcssp">,</span> <span class="pgcssmi">4</span><span class="pgcssp">,</span> <span class="pgcssmi">5</span><span class="pgcssp">,</span> <span class="pgcssmi">6</span><span class="pgcssp">,</span> <span class="pgcssmi">7</span><span class="pgcssp">,</span> <span class="pgcssmi">8</span><span class="pgcssp">,</span> <span class="pgcssmi">9</span><span class="pgcssp">]</span>
<span class="pgcssn">integer_list</span><span class="pgcssp">[::</span><span class="pgcsso">-</span><span class="pgcssmi">1</span><span class="pgcssp">]</span>

<span class="pgcsso">&gt;&gt;</span> <span class="pgcssp">[</span><span class="pgcssmi">9</span><span class="pgcssp">,</span> <span class="pgcssmi">8</span><span class="pgcssp">,</span> <span class="pgcssmi">7</span><span class="pgcssp">,</span> <span class="pgcssmi">6</span><span class="pgcssp">,</span> <span class="pgcssmi">5 …</span></pre></div></td></tr></table></div></div>
        <br>
        <a class="btn" href="https://www.jackboot7.com/python-tips.html#python-tips">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.jackboot7.com/moving-docker-default-directory-debian.html#moving-docker-default-directory-debian">[Debian] Changing Docker's default /var/lib/docker directory</a></h2>
    <p>
          Posted on Tuesday, Sep 10, 2019 in <a href="https://www.jackboot7.com/category/programming.html">programming</a>


          &#8226;     Tagged with

              <a href="https://www.jackboot7.com/tag/debian.html">debian</a>,              <a href="https://www.jackboot7.com/tag/docker.html">docker</a>,              <a href="https://www.jackboot7.com/tag/directory.html">directory</a>,              <a href="https://www.jackboot7.com/tag/systemd.html">systemd</a>
    </p>
  </header>
  <div>
      <p>By default, Docker storage its files in the <cite>/var/lib/docker</cite> directory in the file system. If, like me, you're running out of disk space in the default file system, you can quickly change the default directory. This are the steps I followed in Debian 10, it should work with any distro that uses <cite>systemd</cite></p>
<p>As superuser, modify the systemd docker startup script. Edit the file <cite>/lib/systemd/system/docker.service</cite> replacing the <cite>ExecStart</cite> command:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo vim /var/systemd/system/docker.service
</pre></div>
</td></tr></table><p>Change the line:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssnv">ExecStart</span><span class="pgcsso">=</span>/usr/bin/docker daemon -H fd://
</pre></div>
</td></tr></table><p>to</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssnv">ExecStart</span><span class="pgcsso">=</span>/usr/bin/docker daemon -g /new/path -H fd://
</pre></div>
</td></tr></table><p>then stop the service, and be sure that the daemon is completely stopped:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo systemctl stop docker
$ ps -aux <span class="pgcssp">|</span> grep -i docker
</pre></div>
</td></tr></table><p>The only output should be the one from <cite>grep</cite>. Then you can reload the system and -optionally- synchronize your current docker data to the new directory</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo systemctl daemon-reload
$ sudo mkdir /new/path
$ sudo rsync -aqxP /var/lib/docker /new/path
</pre></div>
</td></tr></table><p>Your docker installation should be running in the new data directory:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ps -aux <span class="pgcssp">|</span> grep -i docker
</pre></div>
</td></tr></table><p>That's it.</p>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.jackboot7.com/visualizing-tweets.html#visualizing-tweets">Visualizing Tweets During Election Weekend</a></h2>
    <p>
          Posted on Thursday, Dec 10, 2015 in <a href="https://www.jackboot7.com/category/programming.html">programming</a>


          &#8226;     Tagged with

              <a href="https://www.jackboot7.com/tag/data.html">data</a>,              <a href="https://www.jackboot7.com/tag/tweets.html">tweets</a>,              <a href="https://www.jackboot7.com/tag/twitter.html">twitter</a>,              <a href="https://www.jackboot7.com/tag/elections.html">elections</a>,              <a href="https://www.jackboot7.com/tag/visualize.html">visualize</a>,              <a href="https://www.jackboot7.com/tag/folium.html">folium</a>,              <a href="https://www.jackboot7.com/tag/python.html">python</a>,              <a href="https://www.jackboot7.com/tag/matplotlib.html">matplotlib</a>,              <a href="https://www.jackboot7.com/tag/pylab.html">pylab</a>
    </p>
  </header>
  <div>
      <p>On Sunday (Dec. 06) parliamentary elections were held in Venzuela. I took the opportunity to fetch some data from Twitter's public stream and use graphics to show what was happening in &quot;<cite>social media</cite>&quot; during that day. To achieve this I relied in the Python programming language.</p>
<div class="section" id="the-data">
<h2><a class="reference internal" href="#the-data">The Data</a></h2>
<p>I decided to monitor all geolocalized tweets with my home city (Caracas) as origin over a period of five days, two days before the elections, the election day, and two days after it.</p>
<p>To fetch the data, I used the <a class="reference external" href="https://pypi.python.org/pypi/twython/">Twython</a> library since I've worked with it before. Therefore, it should be easy to setup a quick script to fetch the data and save it in a text file.</p>
<p>Once the <cite>API</cite> and <cite>OAUTH</cite> keys are correctly following <a class="reference external" href="http://twython.readthedocs.org/en/latest/usage/starting_out.html">Twython's documentation</a>, the next step is to fetch the data originating in certain location, passing it as a parameter to the streaming API. Twitter uses a set of bounding boxes to track the location of a tweet and only geolocated Tweets falling within the requested bounding boxes will be included.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">import</span> <span class="pgcssnn">json</span><span class="pgcsso">,</span> <span class="pgcssnn">os</span>
<span class="pgcsskn">from</span> <span class="pgcssnn">twython</span> <span class="pgcsskn">import</span> <span class="pgcssn">TwythonStreamer</span>

<span class="pgcssn">caracas_location</span> <span class="pgcsso">=</span> <span class="pgcsss2">&quot;-67.017225,10.419554,-66.778716,10.52006&quot;</span>

<span class="pgcssk">class</span> <span class="pgcssnc">MyStreamer</span><span class="pgcssp">(</span><span class="pgcssn">TwythonStreamer</span><span class="pgcssp">):</span>
    <span class="pgcssk">def</span> <span class="pgcssnf">on_success</span><span class="pgcssp">(</span><span class="pgcssbp">self</span><span class="pgcssp">,</span> <span class="pgcssn">data</span><span class="pgcssp">):</span>
        <span class="pgcssk">if</span> <span class="pgcssn">data</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;coordinates&#39;</span><span class="pgcssp">]</span> <span class="pgcssow">is</span> <span class="pgcssow">not</span> <span class="pgcsskc">None</span><span class="pgcssp">:</span>
            <span class="pgcssk">with</span> <span class="pgcssnb">open</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;tweets.txt&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">)</span> <span class="pgcssk">as</span> <span class="pgcssn">f</span><span class="pgcssp">:</span>
                <span class="pgcssn">f</span><span class="pgcsso">.</span><span class="pgcssn">write</span><span class="pgcssp">(</span><span class="pgcssn">json</span><span class="pgcsso">.</span><span class="pgcssn">dumps</span><span class="pgcssp">(</span><span class="pgcssn">data</span><span class="pgcssp">))</span>
                <span class="pgcssn">f</span><span class="pgcsso">.</span><span class="pgcssn">write</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;</span><span class="pgcssse">\n</span><span class="pgcsss1">&#39;</span><span class="pgcssp">)</span>

    <span class="pgcssk">def</span> <span class="pgcssnf">on_error</span><span class="pgcssp">(</span><span class="pgcssbp">self</span><span class="pgcssp">,</span> <span class="pgcssn">status_code</span><span class="pgcssp">,</span> <span class="pgcssn">data</span><span class="pgcssp">):</span>
        <span class="pgcssk">with</span> <span class="pgcssnb">open</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;errors.txt&#39;</span><span class="pgcssp">,</span> <span class="pgcsss1">&#39;a&#39;</span><span class="pgcssp">)</span> <span class="pgcssk">as</span> <span class="pgcssn">f</span><span class="pgcssp">:</span>
            <span class="pgcssn">f</span><span class="pgcsso">.</span><span class="pgcssn">write</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;error: </span><span class="pgcsssi">{0}</span><span class="pgcsss1">: </span><span class="pgcsssi">{1}</span><span class="pgcsss1">&#39;</span><span class="pgcsso">.</span><span class="pgcssn">format</span><span class="pgcssp">(</span><span class="pgcssn">status_code</span><span class="pgcssp">,</span> <span class="pgcssn">data</span><span class="pgcssp">))</span>



<span class="pgcssn">stream</span> <span class="pgcsso">=</span> <span class="pgcssn">MyStreamer</span><span class="pgcssp">(</span><span class="pgcssn">os</span><span class="pgcsso">.</span><span class="pgcssn">environ</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;APP_KEY&#39;</span><span class="pgcssp">],</span> <span class="pgcssn">os</span><span class="pgcsso">.</span><span class="pgcssn">environ</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;APP_SECRET&#39;</span><span class="pgcssp">],</span>
                        <span class="pgcssn">os</span><span class="pgcsso">.</span><span class="pgcssn">environ</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;OAUTH_TOKEN&#39;</span><span class="pgcssp">],</span> <span class="pgcssn">os</span><span class="pgcsso">.</span><span class="pgcssn">environ</span><span class="pgcssp">[</span><span class="pgcsss1">&#39;OAUTH_TOKEN_SECRET&#39;</span><span class="pgcssp">])</span>

<span class="pgcssn">stream</span><span class="pgcsso">.</span><span class="pgcssn">statuses</span><span class="pgcsso">.</span><span class="pgcssn">filter</span><span class="pgcssp">(</span><span class="pgcssn">locations</span><span class="pgcsso">=</span><span class="pgcssn">caracas_location</span><span class="pgcssp">)</span>
</pre></div>
</td></tr></table><p>Since I just wanted to fetch geolocalized tweets, I checked for the existance of the <cite>coordinates</cite> entity in the …</p></div>
        <br>
        <a class="btn" href="https://www.jackboot7.com/visualizing-tweets.html#visualizing-tweets">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.jackboot7.com/virtualenv-add-vars-to-env.html#virtualenv-add-vars-to-env">Quick tip: Adding Variables to env in a Virtualenv (for development purpose)</a></h2>
    <p>
          Posted on Thursday, Jul 16, 2015 in <a href="https://www.jackboot7.com/category/programming.html">programming</a>


          &#8226;     Tagged with

              <a href="https://www.jackboot7.com/tag/python.html">python</a>,              <a href="https://www.jackboot7.com/tag/enviroment.html">enviroment</a>,              <a href="https://www.jackboot7.com/tag/virtualenv.html">virtualenv</a>,              <a href="https://www.jackboot7.com/tag/export.html">export</a>,              <a href="https://www.jackboot7.com/tag/bash.html">bash</a>
    </p>
  </header>
  <div>
      <p>If you're working with third party APIs, you might find code like <cite>YOUR_SECRET_KEY=&quot;some secret api key&quot;</cite> in your source code, this is a bad practices for a lot of reasons (security, source code sharing, etc). Instead, the recommended way to manage this kind of situation is to add the value as a enviroment variable, and read it in your code with something like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">import</span> <span class="pgcssnn">os</span>
<span class="pgcssn">os</span><span class="pgcsso">.</span><span class="pgcssn">environ</span><span class="pgcsso">.</span><span class="pgcssn">get</span><span class="pgcssp">(</span><span class="pgcsss1">&#39;YOUR_SECRET_KEY&#39;</span><span class="pgcssp">)</span>
</pre></div>
</td></tr></table><p>So, how do you avoid to add the variable to the enviroment each time you do some coding? If you're working with virtualenv you simply add it in the <cite>env/bin/activate</cite> script:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssnv">YOUR_SECRET_KEY</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;some secret api key&quot;</span>
<span class="pgcssnb">export</span> YOUR_SECRET_KEY
</pre></div>
</td></tr></table>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.jackboot7.com/debian-development-tips.html#debian-development-tips">Debian (development tips)</a></h2>
    <p>
          Posted on Saturday, Dec 13, 2014 in <a href="https://www.jackboot7.com/category/programming.html">programming</a>


          &#8226;     Tagged with

              <a href="https://www.jackboot7.com/tag/debian.html">debian</a>,              <a href="https://www.jackboot7.com/tag/help.html">help</a>,              <a href="https://www.jackboot7.com/tag/documentation.html">documentation</a>,              <a href="https://www.jackboot7.com/tag/libraries.html">libraries</a>,              <a href="https://www.jackboot7.com/tag/pil.html">pil</a>,              <a href="https://www.jackboot7.com/tag/libjpeg.html">libjpeg</a>,              <a href="https://www.jackboot7.com/tag/locale.html">locale</a>,              <a href="https://www.jackboot7.com/tag/matplotlib.html">matplotlib</a>,              <a href="https://www.jackboot7.com/tag/libxml.html">libxml</a>,              <a href="https://www.jackboot7.com/tag/ubuntu.html">ubuntu</a>,              <a href="https://www.jackboot7.com/tag/freetype.html">freetype</a>,              <a href="https://www.jackboot7.com/tag/postgresql.html">postgresql</a>,              <a href="https://www.jackboot7.com/tag/database.html">database</a>,              <a href="https://www.jackboot7.com/tag/scipy.html">scipy</a>
    </p>
  </header>
  <div>
      <p>These are some extra steps that I've found necessary when starting development in a recently-installed Debian machine.</p>
<div class="section" id="jpeg-support-in-pil-and-pillow">
<h2>Jpeg support in PIL and pillow.</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo apt-get install libjpeg libjpeg-dev libfreetype6 libfreetype6-dev zlib1g-dev
$ sudo ln -s /usr/lib/<span class="pgcsssb">`</span>uname -i<span class="pgcsssb">`</span>-linux-gnu/libfreetype.so /usr/lib/
$ sudo ln -s /usr/lib/<span class="pgcsssb">`</span>uname -i<span class="pgcsssb">`</span>-linux-gnu/libjpeg.so /usr/lib/
$ sudo ln -s /usr/lib/<span class="pgcsssb">`</span>uname -i<span class="pgcsssb">`</span>-linux-gnu/libz.so /usr/lib/
</pre></div>
</td></tr></table></div>
<div class="section" id="installing-lxml-in-python-debian-based">
<h2>Installing lxml in Python (Debian  based).</h2>
<p>If you're getting the <strong>&quot;fatal error: libxml/xmlversion.h: No such file or directory&quot;</strong> error, just install the following development files:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo apt-get install python-dev libxml2-dev libxslt1-dev
</pre></div>
</td></tr></table></div>
<div class="section" id="problems-with-matplotlib-and-freetype">
<h2>Problems with 'matplotlib' and freetype.</h2>
<p>If you're having problems installing matplotlib in a Python virtualenv, and are getting the <em>'freetype missing'</em> error, you sould install the development files for freetype, and (in most cases) rebuild the python dependencies for matplotlib.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ sudo apt-get  -u install libfreetype6-dev
$ sudo apt-get build-dep python-matplotlib
</pre></div>
</td></tr></table><p>After that, you can just use pip normally to install matplotlib</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pip install matplotlib
</pre></div>
</td></tr></table><p>PS. I know of cases where you have to update <em>python-virtualenv</em> and <em>python-pip</em> after you use build-dep. Just apt-get upgrade your installation.
Today I learned about the 'pydoc' command from Python.</p>
</div>
<div class="section" id="problems-with-locale">
<h2>Problems with locale</h2>
<p>In some machines I've found problems when setting locales from Python.  First check the results of running</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ locale
</pre></div>
</td></tr></table><p>In my case is:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcssnv">LANG</span><span class="pgcsso">=</span>es_VE.UTF-8
<span class="pgcssnv">LANGUAGE</span><span class="pgcsso">=</span>es_VE:es
<span class="pgcssnv">LC_CTYPE</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_NUMERIC</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_TIME</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_COLLATE</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_MONETARY</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_MESSAGES</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_PAPER</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_NAME</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_ADDRESS</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_TELEPHONE</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_MEASUREMENT</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_IDENTIFICATION</span><span class="pgcsso">=</span><span class="pgcsss2">&quot;es_VE.UTF-8&quot;</span>
<span class="pgcssnv">LC_ALL</span><span class="pgcsso">=</span>
</pre></div>
</td></tr></table><p>Then use:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="pgcsskn">import</span> <span class="pgcssnn">locale</span>

<span class="pgcssk">try</span><span class="pgcssp">:</span>
    <span class="pgcssn">locale</span><span class="pgcsso">.</span><span class="pgcssn">setlocale</span><span class="pgcssp">(</span><span class="pgcssn">locale …</span></pre></div></td></tr></table></div>
        <br>
        <a class="btn" href="https://www.jackboot7.com/debian-development-tips.html#debian-development-tips">    Continue reading
</a>
  </div>
</article>

  <div class="pagination">
    <a class="btn float-left" href="https://www.jackboot7.com/category/programming2.html">
      <i class="fa fa-angle-left"></i>     Older Posts

    </a>
  </div>




    <footer>
<p>&copy;  2020</p>
<p>    Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Luis Alberto Santana ",
  "url" : "https://www.jackboot7.com",
  "image": "https://2.gravatar.com/avatar/e426d5ca1f331cb8418614b7439a8dcd?v=2&s=150",
  "description": ""
}
</script>


</body>
</html>